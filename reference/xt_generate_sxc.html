<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Cross Sections from Banklines — xt_generate_sxc • sxchan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Cross Sections from Banklines — xt_generate_sxc"><meta name="description" content="Calculate cross sections from banklines that are roughly equally spaced
apart."><meta property="og:description" content="Calculate cross sections from banklines that are roughly equally spaced
apart."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sxchan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Cross Sections from Banklines</h1>

      <div class="d-none name"><code>xt_generate_sxc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate cross sections from banklines that are roughly equally spaced
apart.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">xt_generate_sxc</span><span class="op">(</span><span class="va">bankline</span>, <span class="va">n</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-bankline">bankline<a class="anchor" aria-label="anchor" href="#arg-bankline"></a></dt>
<dd><p>An sf object with banklines.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The number of cross sections to calculate.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An "sxc" object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes the definition of "cross section" relative
to a point in the channel to be the line segment intersecting the point
whose bank-to-bank segment width is the smallest. Note that this does not
imply that the cross section is unique, and in this case the cross section
is arbitrarily taken to be the one closest to a 0-degree angle –
although in almost all cases this should not be an issue.</p>
<p>To define the spacing of the cross sections, a centerline is
first calculated, and equally spaced points are sampled along the
centerline. Cross sections are calculated at these points. Note that
cross sections are not a necessary part of choosing cross section spacing,
but it is useful.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The function the calculates bank-to-bank width for a given angle of
the line crossing through a specified point is riddled with local minima.
Currently, a remedial approach is taken to mitigating this:
it first finds the minimum width on a grid of 10 angles between 0 and pi
(inclusive) (or 100 if the minimum is not unique at first), and then
optimizes the width function around the minimum found on the grid. This
slows down the algorithm noticeably, but not
It's still possible, although likely very rare, for the global minimum
to be missed. An improvement might involve choosing angles that do
not intersect with the neighbouring cross section.</p>
<p>Another improvement to consider is to ensure cross sections go between
left bank and right bank. Since points are being sampled along the
centerline, this should be less of an issue, but there's still a chance
where a cross section will be identified for a "bay" in the channel.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">bl</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">demo_bankline</span>, crs <span class="op">=</span> <span class="fl">3005</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cross</span> <span class="op">&lt;-</span> <span class="fu">xt_generate_sxc</span><span class="op">(</span><span class="va">bl</span>, n <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bl</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cross</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="xt_generate_sxc-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># Inherits spatial properties of the bankline polygon, such as CRS:</span></span></span>
<span class="r-in"><span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">cross</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coordinate Reference System: NA</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincenzo Coia, Jane Wang, Lucy MacKenzie, Brett Eaton, Sarah Davidson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

